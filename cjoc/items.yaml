removeStrategy:
  rbac: SYNC
  items: NONE

items:
- kind: freeStyleJob
  name: casc-bundles-update
  displayName: Update CasC Bundles
  builders:
    - casCBundlesSyncBuildStep:
        purgeDeleted: true
  scm:
    gitSCM:
      userRemoteConfigs:
      - userRemoteConfig:
          credentialsId: github-key
          url: git@github.com:ryecarrigan/cbci-casc-bundles.git
      branches:
      - branchSpec:
          name: '**/master'

- kind: managedController
  displayName: "CloudBees CI - Managed Master - 2.303.2.6"
  name: latest
  configuration:
    kubernetes:
      image: "CloudBees CI - Managed Master - 2.303.2.6"
      memory: 2048
      cpus: 1.0
      disk: 20
  properties:
  - configurationAsCode:
      bundle: default
  - licensing:
      strategy:
        perUserLicensingStrategy: {}
